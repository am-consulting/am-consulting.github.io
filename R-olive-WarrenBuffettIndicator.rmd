---
knit: (function(inputFile, encoding) {username<-Sys.info()['user'];fileName<-'defaultPath.csv';pathToFile <-paste0('C:/Users/', username,'/Desktop/pathToCSV/');setwd(pathToFile);buf0<-read.csv(fileName,header = F,skip = 0,stringsAsFactor = F,check.names = F,fileEncoding = 'utf-8');timeStamp<-format(Sys.time(),'%Y%m%d%H%M%S');htmlName<-'WarrenBuffettIndicatorJapan';rmarkdown::render(inputFile, encoding = encoding, output_file = paste0('C:/Users/',username,buf0[2,1],'charts/','am-consulting.co.jp-',htmlName,'.html')) })

title : "Warren Buffett Indicator Of Japan"
author: "アセット･マネジメント･コンサルティング株式会社 http://am-consulting.co.jp"
date: "`r format(Sys.time(), '%Y-%m-%d %H:%M:%S')`"
output: 
  html_document:
    fig_height: 8
    fig_width: 10
    keep_md: no
    md_extensions: -ascii_identifiers 
---
<link href="http://knowledgevault.saecanet.com/components/rmarkdown-html.css" rel="stylesheet">
<script src="http://knowledgevault.saecanet.com/components/JavascriptCode.js"></script>
<style>.main-container {max-width : 1000px;}</style>

- アセット･マネジメント･コンサルティング株式会社 http://am-consulting.co.jp
- SaECaNet http://saecanet.com/
- Olive http://olive.saecanet.com/
- twitter https://twitter.com/AMC2_Japan
- 本ページへのリンクを共有:<a href="https://twitter.com/share" class="twitter-share-button" data-via="AMC2_Japan" data-size="large">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

```{r warning = F, error = F, message = F, echo = F}
library(RCurl)
fileName <- 'functionList.csv'
functionList <-
  read.csv(
    file = paste0('https://raw.githubusercontent.com/am-consulting/am-consulting.github.io/master/csv/',
                  fileName),
    header = F,
    as.is = T)
for(iii in 1:nrow(functionList)){
  script <- 
    getURL(paste0("https://raw.githubusercontent.com/am-consulting/am-consulting.github.io/master/", 
                  functionList[iii,1]),
           ssl.verifypeer = F)
  eval(parse(text = script))
}
```

```{r set-options, echo=F, cache=F}
options(width = 1000)
```

```{r,warning=F,error=F,message=F,echo=F,results='hold'}
library(Nippon)
rFile <- 
  c('importGDPofJapan.r','importMarketCapitalization.r')
for(iii in 1:length(rFile)){
  script <- 
    RCurl::getURL(paste0('https://raw.githubusercontent.com/am-consulting/Rscript/master/',
                  rFile[iii]),ssl.verifypeer = F)
  eval(parse(text = script))
}
gdp1[,-1] <- 
  data.frame(apply(gdp1[,-1],2,function(x)x*10^-3),
             stringsAsFactors = F,check.names = F,row.names = NULL)
marketCapitalization[,1] <-
  as.Date(paste0(substring(marketCapitalization[,1],1,4),'-',
                 substring(marketCapitalization[,1],6,7),'-1'))
mergeData <-
  merge(gdp1[,c(1,2)],marketCapitalization[,c(1,2)],by='Date',all=T)
colnames(mergeData)[-1] <- 
  gsub('-',':',gsub('[a-z]|[0-9]|\\s','',colnames(mergeData)[-1],ignore.case = T))
mergeData <- subset(mergeData,as.Date(gdp1[1,1])<=mergeData[,1])
colnames(mergeData)[-1] <-
  sapply(paste0(colnames(mergeData)[-1],'_兆円'),zen2han)
mergeData[,-1] <- 
  data.frame(apply(mergeData[,-1],2,as.numeric),stringsAsFactors = F,check.names = F)
mergeData$`Warren Buffett Indicator` <-
  round(apply(mergeData,1,function(x)ifelse(is.na(x[2]),NA,as.numeric(x[3])/as.numeric(x[2]))),2)
# csv出力パート
scriptFile <- 'R-writeCSVtoFolder.r'
script <-
  RCurl::getURL(
    paste0("https://raw.githubusercontent.com/am-consulting/am-consulting.github.io/master/",
           scriptFile),
    ssl.verifypeer = F)
eval(parse(text = script))
fun_writeCSVtoFolder(objData = mergeData,dataType = 1,csvFileName = 'バフェット指数')
# csv出力パート
```

```{r,warning=F,error=F,message=F,results='hold',echo=F}
fun_latestResult(obj = na.omit(mergeData),objColumn = 4)
dataTitle <- 
  paste0('Warren Buffett Indicator Of Japan/日本のバフェット指数:', latestResult)
dataSource <- 
  '株式会社日本取引所グループ、内閣府'
windowsFonts(Meiryo = windowsFont("Meiryo"))
options(scipen = 999)
```

***

- `r paste0("タイトル : ", dataTitle)`
- `r paste0("データ出所 : ", dataSource)`

***

```{r warning=F,error=F,message=F,echo=F,results='hide',fig.height=5}
username <-
  Sys.info()['user']
pathToFile <-
  paste0('C:/Users/', username,'/Desktop/pathToCSV/')
setwd(pathToFile)
fileName <-
  'defaultPath.csv'
buf <-
  read.csv(file = fileName,
           header = F,
           skip = 0,
           stringsAsFactor = F,
           check.names = F,
           fileEncoding = 'utf-8',quote = "\"")
pathOutputTOcsv <-
  paste0("C:/Users/", username, buf[2,1],'charts/chartImages/')
setwd(pathOutputTOcsv)
getwd()
par(family = 'Meiryo')
pngFile <-
  paste0(htmlName, ".png")
png(file = pngFile, width = 1000, height = 600)
##################
par(family='Meiryo',mar=c(10,4,3,1),font.main=1)
dev.off()
```

```{r warning=F,error=F,message=F,echo=F,results='hide'}
fun_outputMD(tags = '',
             objDF = ,
             htmlName = htmlName,
             image = 1,
             dataTitle = dataTitle,
             tableTitle = ,
             tableName = )
```

***
<script>MakeNegative()</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3077339-5', 'auto');
  ga('send', 'pageview');

</script>

<!--

--- 
tags : [財務省,証券売買契約] 
published : true
---
# 対外及び対内証券売買契約等の状況(週次・指定報告機関ベース):2017.4.2～4.8(億円):対外-株式･投資ファンド持分-ネット:829,対内-株式･投資ファンド持分-ネット:4410
## 統計データ概要

***

#### 第2次安倍内閣発足(2012年12月26日)以降のネット合計(兆円)



|                              Item| 第2次安倍内閣発足以降のネット合計(兆円)|
|---------------------------------:|---------------------------------------:|
|              対外-中長期債-ネット|                                 26.0443|
| 対内-株式･投資ファンド持分-ネット|                                 11.4873|
|              対内-中長期債-ネット|                                 18.3284|



***

#### 原数値(単位:億円)


|                              対象| 2017.3.19～3.25| 2017.3.26～4.1| 2017.4.2～4.8|
|---------------------------------:|---------------:|--------------:|-------------:|
|   対外-株式･投資ファンド持分-取得|          10,334|         15,264|        11,356|
|   対外-株式･投資ファンド持分-処分|          13,274|         11,910|        10,528|
| 対外-株式･投資ファンド持分-ネット|          -2,940|          3,354|           829|
|                対外-中長期債-取得|          69,545|         79,469|        81,184|
|                対外-中長期債-処分|          71,013|         68,471|       102,952|
|              対外-中長期債-ネット|          -1,468|         10,998|       -21,768|
|                  対外-小計-ネット|          -4,408|         14,352|       -20,939|
|                  対外-短期債-取得|           7,626|         11,908|         9,750|
|                  対外-短期債-処分|           7,815|         11,992|         8,559|
|                対外-短期債-ネット|            -188|            -84|         1,191|
|                  対外-合計-ネット|          -4,596|         14,268|       -19,748|
|   対内-株式･投資ファンド持分-取得|          77,419|        100,832|       121,668|
|   対内-株式･投資ファンド持分-処分|          84,962|         94,988|       117,258|
| 対内-株式･投資ファンド持分-ネット|          -7,543|          5,845|         4,410|
|                対内-中長期債-取得|          11,287|         18,000|        21,136|
|                対内-中長期債-処分|          30,524|          9,100|        15,268|
|              対内-中長期債-ネット|         -19,237|          8,900|         5,868|
|                  対内-小計-ネット|         -26,780|         14,745|        10,278|
|                  対内-短期債-取得|          34,692|         12,124|        64,583|
|                  対内-短期債-処分|          50,098|         42,283|        45,279|
|                対内-短期債-ネット|         -15,407|        -30,159|        19,303|
|                  対内-合計-ネット|         -42,186|        -15,415|        29,581|




***
	
## データテーブル･チャート
Link - [データテーブル･チャート](http://knowledgevault.saecanet.com/charts/am-consulting.co.jp-internationalTransactionsInSecurities.html)
<iframe src="http://knowledgevault.saecanet.com/charts/am-consulting.co.jp-internationalTransactionsInSecurities.html" width="100%" height="800px"></iframe>

-->
