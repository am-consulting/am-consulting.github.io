```{r}
# http://www.e-stat.go.jp/SG1/estat/List.do?bid=000001015843&cycode=0
library(ggplot2)
baseURL <- 
  'https://raw.githubusercontent.com/am-consulting/am-consulting.github.io/master/csv/GeneralSurveyOfSchools/'
csvFiles <- c('nen002.csv','nen004.csv','nen005.csv')
iii <- 1
buf0 <- read.csv(file = paste0(baseURL,csvFiles[iii]),header = F,fileEncoding = 'utf8',stringsAsFactors = F)
sheetTitle <- buf0[1,1]
colnames(buf0) <- buf0[grep('区分',buf0[,1]),]
buf1 <- buf0[-c(1:grep('区分',buf0[,1])),]
buf1[,-1] <- apply(buf1[,-1],2,as.numeric)
buf1[,1] <- as.Date(buf1[,1])
objCol <- c(2,4,5,7,13,14,16,17,15)
for(ccc in seq(length(objCol))){
  tmp <- na.omit(buf1[,c(1,objCol[ccc])])
  tmp$school <- colnames(tmp)[2]
  colnames(tmp)[2] <- sheetTitle
  if(ccc == 1){allData <- tmp}else{allData <- rbind(allData,tmp)}
}
allData[,3] <-factor(allData[,3],levels = unique(allData[,3]))
ggplot(data = allData,aes(x = allData[,1],y = allData[,2],fill = allData[,3])) + geom_bar(stat = 'identity')
```
